# Chapter 10 - Namespaces

Separates resources within the cluster

- I can create a resource with the same name in multiple deployments

Default namespaces:

- `default` -> default namespace used in all kubectl commands
- `kube-system` -> contains all kubernetes components



Commands:

- `kubectl get ns` -> list all namespaces
- `kubectl get all --namespace kube-system` -> list all components inside a namespace
  - `kubectl get all -n kube-system`
- `kubectl delete ns/demo`
- `kubectl create ns demo` -> create command through command line

Specify namespace in any command: `-n myNamespace`

## Communication between namespaces

### Inside a namespace

Inside a namespace pods can easily interact with each other

Demo:

- create the nginx deployment from ch8 in default and demo namespace
- exec in pod in namespace demo: `kubectl exec -it podName -- sh`
- exec in pod in namespace default
- curl from pod in default to demo: success
  - vice versa is also success

### Between namespaces

Between namespaces pods can communicate only through a **Fully Qualified Domain Name (FQDN)**

Demo 2:

- scale the deployments to 3 replicas
- expose both the deployments with a clusterIp(note that they have different names): 
  - `kubectl expose deploy/nginx-demo -n demo --name svc-demo --port 80`
  - `kubectl expose deploy/nginx-demo --name svc-test --port 80`
- from default pod:
  - `curl svc-test` -> success
  - curl svc-demo -> fail (`curl: (6) Could not resolve host: svc-demo`)
- vice versa in demo pod
- in default pod: cat /etc/resolv.conf

```
search default.svc.cluster.local svc.cluster.local cluster.local
nameserver 10.96.0.10
options ndots:5
```

If I want to curl the default svc from demo, I need to use its FQDN: **`<service>.<namespace>.svc.cluster.local`**

- `curl svc-demo.demo.svc.cluster.local`