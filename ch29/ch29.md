# Chapter 29 - Kubernetes Volumes

`emptyDir` -> persistent only during the lifecycle of the pod

- when the pod is deleted, the volume is deleted as well

Persistent volume: storage that is made available to pods

- has different types of modes

Persistent volume claim: a pod can request a volume

- when the pod runs, Kubernetes will bind the PVC to a matching Persistent volume

A pvc and pv match if:

- PV has space >= PVC
- PV and PVC have compatible modes

E.g.

- PV: 100Gi
- pod creates a PVC with 10Gi
  - PV is assigned to the pod -> now PV has available 90Gi
- pod 2 creates a PVC with 100Gi
  - the pod will remain in pending state until we provision a PV of at least 100Gi

Access modes:

- ReadWriteOnce
- ReadOnlyMany
- ReadWriteMany
- ReadWriteOncePod

ReclaimPolicy: what happens to the pv when the pvc is deleted

- Retain -> the pv will keep existing, but no other pvc will be able to request space from it
- Delete -> delete the pv
- Recycle -> the pv becomes available to other pvc for binding

The provisioned storage should not be provisioned on the node, but on the cloud. This can be done through storage classes:

- they reference storage that can be provisioned by the cloud provider
- by specifying them in the pv we tell the cloud provider to provision that storage for the cluster