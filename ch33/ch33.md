# Chapter 33 - Ingress

Nodeport and LoadBalancer services have limitations:

- Nodeport -> unstable, nodes can change
- LoadBalancer:
  - depends on the cloud provider's load balancer
  - very expensive: each LoadBalancer service requires a new cloud provider load balancer
  - security: low control on the cloud provider's lb

Solution: ingress

## What is ingress

In networking, *ingress* is the traffic incoming to the application.

We have 3 elements:

- load balancer
- ingress controller
- ingress resource

Ingress controller:

- Go program developed by the load balancer company (e.g. nginx)
- deployed on the cluster
- creates the load balancer (provided by the cloud provider)
- watches the `Ingress` resource yaml and configures the lb accordingly

## Ingress configuration

Step 1: installing the controller

- the cloud provider will create a load balancer and provide an external IP

e.g. nginx ingress controller

> [NOTE]
> There are 2 different nginx ingress controllers, one by the NGINX company and one by the community

Step 2: creating the Ingress resource

### Ingress resource

`ingressClassName`: identifies the ingress controller used

- it is common in a single cluster to use many different ingress controllers
- for nginx it is: `ingressClassName: nginx`

Commands:

- `kubectl get ingress`
