# Chapter 13 - Static Pods, Manual Scheduling, Labels, and Selectors

## Static pods

Scheduler -> decides on which node to run a pod

- makes the request to the kubelet
- is a control plane component -> runs as a pod in the kube-system namespace

But if the scheduler is a pod, who decides where the scheduler runs? Static pods!

Static pod -> the kubelet is responsible to run it, not the scheduler

Static pods in kubernetes:

- scheduler
- controller manager
- apiServer
- ...

> [!NOTE]
> With kind, to ssh into a node, just do: `docker exec -it NOTE_NAME bash` -> a node is just a docker container

Demo inside the master node:

- `cd /etc/kubernetes/manifests/` -> stores all .yaml manifests
  - if I remove a yaml from this directory, that resource will be deleted
- what if I remove the scheduler? Existing pods will continue running, but new pods cannot be created (stuck in pending state)

### Scheduling

The selector looks for pods without the `nodeName:` selector, meaning those pods that were not assigned to a node.

If I specify, for example `nodeName: desktop-control-plane` in the yaml of a pod, this pod will be scheduled even if the scheduler is non existent.

## Labels and selectors

Label -> part of metadata

- useful to group resources (es. env: dev) -> pods, deployments...

Selector -> matches resources with that certain label

- e.g. a service will manage all pods with a certain label

`kubectl get pods --show-labels`

Find all pods with a certain label

`kubectl get pods --selector env=demo`

Use cases:

- group and retrieve resources

## Annotations

Store additional details of the object:

- last-applied-configuration -> track the last applied version
- creationTimestamp
- ...

