# Chapter 36 - Logging and monitoring

Kubernetes does not come with monitoring embedded, we need to install the Metrics-Server addon:

- it creates the daemonSet cAdvisor -> collects node/container runtime metrics + pod data in the node and sends it to kubelet which forwards them to the metrics server
- the metric server exposes such metrics with the Metrics API to the API server

`kubectl top` calls the api server which calls the metrics API

## Debug a cluster without Docker

Nowadays Kubernetes uses `containerd`, not docker, so I cannot use docker commands to debug it.

> [NOTE]
> Why should I use docker to debug kubernetes instead of kubectl? If the api server is not available

Use `crictl` to debug: similar to docker, with few exceptions.

- `crictl ps` -> like `docker ps`
  - `crictl ps | grep api` -> check if the apiserver is running
- `crictl pull`
- `crictl logs ${containerId}` -> fetches a container's logs

If the apiserver is missing, check if its yaml is present in the static pods directory.